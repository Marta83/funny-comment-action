import { createEventHandler } from "../event-handler/index";
import { middleware } from "./middleware";
export function createMiddleware(options) {
    if (!options || !options.secret) {
        throw new Error("options.secret required");
    }
    const state = {
        eventHandler: createEventHandler(options),
        path: options.path || "/",
        secret: options.secret,
        hooks: {},
    };
    const api = middleware.bind(null, state);
    api.on = state.eventHandler.on;
    api.removeListener = state.eventHandler.removeListener;
    return api;
}
